---
lab:
    title: 'ラボ 01: データ モデリング'
    module: 'モジュール 03: Common Data Service の概要'
---

# PL-900: Microsoft-Power-Platform-Fundamentals
## モジュール 3、ラボ 1 - データ モデリング

## 重要なお知らせ re: テナント - 一時的な回避策

2020 年 1 月 23 日現在、WWL は、事前プロビジョニングされた Dynamics 365 アクセスを受講者に提供できず、今後 4 ~ 6 週間で利用できるソリューションに取り組んでいます。回避策として、Dynamics 365 試用版アカウントの使用を推奨します。各受講者は、これらを要求する責任があります。Dynamics 365 テナント (マーケティングを含む) を取得する受講者を支援するために、M365 テナントは、認定ラボのホストを通じて提供されます。これは短期的なソリューションであり、進捗状況に応じてラーニング パートナーや MCT を含むすべての関係者を最新の状態に保ち、ラボでの使用に向けた Dynamics 365 アクセスの事前プロビジョニングに関するより永続的なソリューション タイムラインが確立されるようにアドバイスします。受講者用 M365 テナントのプロビジョニングのために認定ラボ のホストと協力し、M365 テナントを使用して、適切なアプリケーションの Dynamics 365 試用版をセキュリティで保護するには、次の手順に従ってください。
 
1. 提供された M365 資格情報を使用して、https://admin.microsoft.com/ にログインし、条件に同意します。
2. 正常にログインしたら、https://trials.dynamics.com/ にアクセスします。コースに適用するアプリケーションを選択します。
3. 「職場の電子メール」 で、M365 資格情報の電子メール アドレスを入力します。「電話番号」 に自分の電話番号を入力します。
4. 「始める」 を選択します。
5. on.microsoft.com アカウントのパスワードを入力するように求められます。M365 テナントに指定されたパスワードを入力します。
6. 使用条件に同意するように求められた場合は、同意します。環境をプロビジョニングするのに数分ほどかかる場合があります。

シナリオ
========

ベローズ カレッジは、キャンパス内に複数の建物を持つ教育機関です。キャンパス訪問は現在、紙の記録簿に記録されています。情報は一貫してキャプチャされず、キャンパス全体の訪問に関するデータを収集して分析する手段はありません。 

キャンパス管理は、建物へのアクセスがセキュリティ担当者によって制御され、すべての訪問がホストによって事前登録され、記録される必要がある訪問者登録システムを近代化したいと考えています。

このコースでは、アプリケーションを構築し、自動化を実行して、ベローズ カレッジの管理およびセキュリティ担当者がキャンパス内の建物へのアクセスを管理および制御できるようにします。 

このラボでは、環境をセットアップし、Common Data Service (CDS) データベースを作成し、変更を追跡するソリューションを作成します。また、次の要件をサポートするデータ モデルも作成します。

-   R1 – キャンパス訪問の場所 (建物) を追跡する
-   R2 – 訪問者を識別し、追跡するための基本情報を記録します 
-   R3 – 訪問をスケジュール、記録、および管理します 

最後に、サンプル データを CDS にインポートします。

ハイレベルのラボ手順
======================

学習環境を準備するには、次の手順を実行します。

* ソリューションと発行元を作成します
* アプリケーション要件を満たすために必要な新規コンポーネントと既存のコンポーネントの両方を追加します。メタデータの説明 (エンティティ、フィールドの種類、およびリレーションシップ) については、[データ モデルのドキュメント](../../Allfiles/Labs/Campus%20Management.vsdx) を参照してください。 

すべてのカスタマイズが完了すると、ソリューションに複数のエンティティが含まれます。

-   連絡先
-   建物
-   訪問

## 前提条件

* なし

始める前に考慮すべきこと
-----------------------------------

* 名前付け規則
* データ型、制限事項 (名前の最大長など)
* 簡単なローカライズをサポートする日時の書式設定

演習 \#1: 環境とソリューションの作成
==================================================

**目的:** この演習では、環境を準備し、データ モデリング プロセスをサポートするソリューションを作成します。 

タスク \#1: 環境の作成
-----------------------------

演習の前に環境が与えられていない場合は、このタスクで新しい作業環境を作成します。それ以外の場合は、次のタスクに進むことができます。

1.  <https://aka.ms/ppac> にサインインします

2.  「**環境**」 を選択し、上部のメニューから 「**新規**」 をクリックします。新しい
    メニューがウィンドウの右側に開きます。

3.  **名前** に **ベローズ カレッジ 「自分の姓」** を入力します。

4.  「**タイプ**」 のドロップダウンで 「**生産**」 を選択します。

5.  自分の **リージョン** を選択します。

6.  この環境を作成するための **目的** を入力します (オプション)。  
    
7.  これと一緒に **この環境のデータベースを作成** する場合は、**切り替え** をオンにします。
    これと一緒にデータベースを作成したい、それ以外の場合は一度だけ実行できます
    環境が設定されます。

8.  「**次へ**」 をクリックします。

9.  「**言語**」 と 「**通貨**」 を選択します。これらのラボの目的のために、
    環境には **英語** と **米ドル (USD)** が選択されています。

10. これらのラボの目的のために、「**Dynamics 365 アプリを有効にする**」 を
    ラボ。

11. これらの目的のために、「**サンプル アプリとデータをデプロイする**」 を無効のままにします 
    ラボ。

12. 「**保存**」 をクリックします。

13. 環境をプロビジョニングするのに数分ほどかかる場合があります。「**再読込**」 ボタンをクリックしてリストを更新できます。環境がプロビジョニングされると、「**状態**」 が 「準備完了」 に変わります。 

14. 以前にデータベースを作成していない場合は、環境を選択し、「**自分のデータベースの作成**」 をクリックします。それ以外の場合は、この手順をスキップします。

    - 「**通貨**」 と 「**言語**」 を選択します。    これらのラボの目的のために、
    環境には **米ドル** (USD) と**英語**が選択されています。   

    - 「**自分のデータベースの作成**」 をクリックします。

タスク \#2: ソリューションと発行元を作成する
---------------------------------------

1.  ソリューションを作成する

    -   <https://make.powerapps.com> にサインインします

    -   上部のドロップダウン メニューから自分の環境を選択します。

    -   左側のメニューから 「**ソリューション**」 を選択し、「**新しいソリューション**」 をクリックします。   

    -   「**表示名**」 に 「**キャンパス管理**」 と入力します。   

2.  発行元を作成する

    -   「**パブリッシャー**」 ドロップダウンをクリックし、「**+ パブリッシャー**」 を選択します。

    -   **表示名** に 「**Bellows College**」、**プレフィックス** に 「**bc**」 を入力します。

    -   「**保存して閉じる**」 をクリックします。

3.  ソリューションの作成を完了します。

    -   次に、「**発行元**」ドロップダウンをクリックし、「**ベローズ カレッジ**」 を選択します。
        発行元を選択します。

    -   「**バージョン**」 に 「**1.0.0.0**」 と入力し、「**作成**」 をクリックします。

タスク \#3: 既存のエンティティを追加する
-----------------------------

1.  作成した **Campus Management** ソリューションをクリックして開きます。
2.  「**既存のものを追加**」 をクリックして、「**エンティティ**」 を選択します。
3.  **連絡先** を探して選択します。
4.  「**次へ**」 をクリックします。
5.  「**コンポーネントを選択**」 をクリックします。
6.  「**ビュー**」 タブを選択し、「**アクティブな連絡先**」 ビューを選択します。クリック
    **追加**。
7.  「**コンポーネントを選択**」 を再度クリックします。
8.  「**フォーム**」 タブを選択し、「**連絡先**」 フォームを選択します。
9.  「**追加**」 をクリックします。
10. **1 つのビュー** と **1 つのフォーム**が選択されている必要があります。**「Add」** をもう一度クリックします。
    これにより、新しく作成されたソリューションに連絡先エンティティが追加されます。 
21.  ソリューションに次の 1 つのエンティティが追加されました。連絡先。

演習 \#2: エンティティとリレーションシップの作成
========================================

**オブジェクト:** この演習ではエンティティとリレーションシップを作成します
エンティティ間で作成します。

タスク 1建物エンティティとフィールドの作成
-----------------------------------------

1.  開発環境での継続のために、キャンパス管理を開きます
    ソリューション
    * サインインします <https: make.powerapps.com> (まだサインインしていない場合)
    * **「ソリューション」** を選択し、**「キャンパス管理」** をクリックして開きます。
          作成したソリューション (このソリューションにまだ参加していない場合)
2.  建物エンティティの作成

    -   **「新規」** をクリックして **「エンティティ」** を選択します。
    -   **表示名** に **建物** と入力して、**「作成」** をクリックします。これにより、
            顧客エンティティとフィールドの追加を開始できる間、バックグラウンドでエンティティのプロビジョニングを
            開始します。

## タスク #2: 訪問の作成エンティティとフィールド

**訪問** エンティティには、建物、訪問者、スケジュールされた時間、および各訪問の実際の時間を含むキャンパス訪問に関する情報が含まれます。 

訪問チェックイン プロセス中に尋ねられたときに、訪問者が簡単に入力して解釈できる一意の番号を毎回ごとの訪問に割り当てたいと思います。

> [重要]
> **タイム ゾーンに依存しない** 動作を使用して、訪問の時刻は *常に* 建物の場所に対してローカルであり、異なるタイム ゾーンから表示しても変更してはならないため、日付と時刻の情報を記録します。 

1.  「**キャンパス管理**」 ソリューションの選択
2. 訪問の作成エンティティ

   * **「新規」** をクリックして **「エンティティ」** を選択します。
   * 「**表示名**」 に 「**訪問**」 と入力して、「**作成**」 をクリックします。これにより、バックグラウンドでエンティティのプロビジョニングが開始され、他のフィールドの追加を開始できます。

3. スケジュール済みの開始の作成

   * **フィールド** タブを確実に選択して、**「フィールドの追加」** をクリックします。
   * **表示名** に対して **スケジュール済みの開始** と入力します。  
   * **「データ型」** の **「日付と時刻」** を選択します。
   * **必須** チェックボックスをオンにします。
   * **「詳細」** セクションを展開します。
   * **「動作」** で  **「タイム ゾーンに依存しない」** を選択します。   
   * **「完了」** をクリックします。

4.  スケジュール済みの終了フィールドの作成

    * **「フィールドの追加」** をクリックします。
    * **表示名** に **スケジュール済みの終了** と入力 します。   
    * **「データ型」** の **「日付と時刻」** を選択します。
    * **必須** チェックボックスをオンにします。
    * **「詳細」** セクションを展開します。
    * **「動作」** で **「タイム ゾーンに依存しない」** を選択します。   
    * **「完了」** をクリックします。
6.  実際の開始日フィールドの作成
    * **「フィールドの追加」** をクリックします。
    * **表示名** に **実際の開始** と入力します。   
    * **「データ型」** の **「日付と時刻」** を選択します。
    * **「詳細」** セクションを展開します。
    * **「動作」** で  **「タイム ゾーンに依存しない」** を選択します。   
    * **「完了」** をクリックします。
7.  実際の終了フィールドの作成
    * **「フィールドの追加」** をクリックします。
    * **表示名** に **実際の終了** と入力します。   
    * **「データ型」** の **「日付と時刻」** を選択します。
    * **「詳細」** セクションを展開します。
    * **「動作」** で **「タイム ゾーンに依存しない」** を選択します。   
    * **「完了」** をクリックします。
7.  コード フィールドを作成する
    * **「フィールドの追加」** をクリックします。
    * **表示名** に **コード** と入力します。
    * **「データ型」** で **「オートナンバー」** を選択します。   
    * **オートナンバー型** に **「日付接頭辞番号」** を選択します。   
    * **「完了」** をクリックします。
8.  **「エンティティの保存」** をクリックします。

タスク 3: リレーションシップの作成
------------------------------

1.  **「キャンパス管理」** ソリューションを選択します。
4.  訪問と連絡先のリレーションシップを作成します
    * 「**訪問**」 エンティティをクリックして開きます。
    * **「リレーションシップ」** タブを選択します。
    * **「リレーションシップの追加」** をクリックし、**「多対一」** を選択します。
    * **関連する (1)** 連絡先を選択 
    * **ルックアップ フィールドの表示名** に **訪問者** を入力 します 
    * **「完了」** をクリックします。
3.  訪問の建物へのリレーションシップへの作成
    * 「**訪問**」 エンティティをクリックして開きます。
    * **「リレーションシップ」** タブを選択します。
    * **「リレーションシップの追加」** をクリックし、**「多対一」** を選択します。
    * **関連する (1)** 建物を選択します 
    * **「完了」** をクリックします。
4.  **「エンティティの保存」** をクリックします。
5.  トップメニューから **「ソリューション」** を選択し、「**すべて公開カスタマイズ**」 をクリックします。

# 演習 3: データをインポートします

**目標:** この演習では、サンプル データを Common Data Service データベースにインポートします。

## タスク 1データ マップのインポート

1. [CampusDataMap.xml](../../Allfiles/Labs/CampusDataMap.xml) をダウンロードします。
2. https://aka.ms/ppac の Power Platform 管理センターに移動します。
3. 左側のナビゲーション ページで 「環境」 を選択し、ターゲット環境を選択して **「設定」** をクリックします。
4. **「データ管理」** セクションを展開し、**「データ マップ」** を選択します。これにより、新しいブラウザー タブでマップのインポート画面が開きます。
5. **「インポート」** をクリックしてから、**「ファイルの選択」** をクリック します。以前にダウンロードした **CampusDataMap.xml** を見つけて選択し、**「OK」** をクリックします。

## タスク #2: データをインポートします  

1. [CampusData.zip](../../Allfiles/Labs/CampusData.zip) をダウンロードしてください。
2. 環境に合った元のタブに戻します。  
3. **「データ インポート ウィザード」** を押します。
4. **「データのインポート」** を押します。
5. **「ファイルの選択」** をクリックしてから、以前にダウンロードした **CampusData.zip** を見つけて選択します。
6. **「次へ」** をクリックして、もう一度 **「次へ」** を押します。
7. **「CampusImportDataMap」** を選択し、**「次へ」** を押します。
8. マッピングの概要を確認し、**「次へ」** をクリックしてから、**「送信」** を押します。  
9. **「完了」** を押します。

## タスク 3: データ インポートを確認します

1. **「キャンパス管理」** ソリューションを選択します。
2. **「訪問」** エンティティを選択し、**「データ」** タブを選択します。
3. 右上隅のビュー セレクターを押し、**「すべてのフィールド」** を選択します
4. インポートが成功した場合は、訪問エントリの一覧が表示されます。
5. **「建物」** 列の任意の値をクリックし、建物フォームが別のウィンドウで開くことを確認します。
6. **「訪問者」** 列の任意の値をクリックし (ビューを右にスクロールする必要がある場合があります)、連絡先フォームが別のウィンドウで開くことを確認します。

# 課題

* ソリューションの一部として *予定* アクティビティを使用することを検討しますか? 何が変わるでしょうか?
* スケジュールされた開始後にスケジュールされた終了を強制する方法とは? 
* 1 回の訪問で複数の会議のサポートを追加します。
* 外部の連絡先だけでなく、内部スタッフのメンバーのための建物のアクセスを保護します。
* 特定の建物への訪問には、経営陣の承認が必要です。承認プロセスはデータ モデルで何が変更されますか?

