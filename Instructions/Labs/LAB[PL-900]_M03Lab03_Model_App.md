---
lab:
    title: 'ラボ: モデル駆動型アプリ'
    module: 'モジュール 3: Power Apps の開始'
---

# モジュール 3: Power Apps の開始
## ラボ: モデル駆動型アプリ

シナリオ
========

ベローズ カレッジは、キャンパス内に複数の建物を持つ教育機関です。キャンパスの訪問者は現在、紙ベースの受付簿に記録されています。情報は一貫してキャプチャされず、キャンパス全体の訪問に関するデータを収集して分析する手段はありません。 

キャンパス管理は、建物へのアクセスがセキュリティ担当者によって制御され、すべての訪問がホストによって事前登録され、記録される必要がある訪問者登録システムを近代化したいと考えています。

このコース全体を通して、アプリケーションを構築するとともに自動化を行って、ベローズ・カレッジの管理担当者とセキュリティ担当者がキャンパス内の建物へのアクセスを管理および制御できるようにします。 

このラボでは、Power Apps のモデル駆動型アプリを作成し、バックオフィスのキャンパス スタッフがキャンパス全体の訪問レコードを管理できるようにします。

ラボ手順の概要
======================

モデル駆動型アプリを作成する一環として、次の手順を実行します。

-   「キャンパス管理」という名前の新しいモデル駆動型アプリを作成する

-   アプリのナビゲーションを編集して必要なエンティティを参照します

-   アプリに必要なエンティティのフォームとビューをカスタマイズする

次のコンポーネントを操作します。

- **ビュー**: ビューを使用すると、ユーザーはフォームに既存のデータを表示できます
テーブルの。

- **フォーム**: ここで、ユーザーはエンティティ内の新しいレコードを作成または更新します。

両方のコンポーネントは、より良いユーザー エクスペリエンスのためにモデル駆動型アプリに統合されます。

## 前提条件

* ラボ 1 の完了 - データ モデリング

始める前に考慮すべきこと
-----------------------------------

-   ユーザー エクスペリエンスを向上させるためにどのような変更を加える必要がありますか。

-   構築したデータ モデルに基づいて、モデル駆動型アプリに何を含める必要がありますか。
    
-   モデル駆動型アプリのサイトマップで行うことができるカスタマイズは何ですか。


演習 \#1: ビューとフォームのカスタマイズ
=======================================

**目標:** この演習では、モデル駆動型アプリで使用されるカスタム作成エンティティのビューとフォームをカスタマイズします。

タスク \#1: 訪問フォームを編集します
-----------------------------------

1.  <https://make.powerapps.com> にまだサインインしていない場合は、サインインします。
2.  **環境**を選択します
3.  「**ソリューション**」 を選択します。
4.  「**Campus Management**」 ソリューションをクリックして開きます。
5.  「**訪問**」 エンティティをクリックして開きます。
6.  「**フォーム**」 タブを選択し、「**メイン**」 フォーム タイプをクリックして開きます。 
    -   既定では、フォームには名前 (プライマリ フィールド) と 所有者の 2 つのフィールドがあります。
7.  フィールドをフォームにドラッグするか、フィールド名をダブルクリックして、「**所有者**」 フィールドの下に次のフィールドを追加します。
    * **建物**
    * **訪問者**
    * **開始予定**
    * **終了予定**
    * **実際の開始**
    * **実際の終了** 
8.  「**コード**」 フィールドをドラッグして、フォーム ヘッダーにドロップします。(フォーム上のフィールドを表示するには、画面の右側にある 「プロパティ」 パネルを最小化する必要がある場合があります)。
9.  コード フィールドで選択したまま、 プロパティ パネルの 「**読み取り専用**」 フィールドのチェック ボックスをオンにします。
10.  「**所有者**」 フィールドを選択し、「プロパティ」 パネルで 「**フィールド ラベル**」 を 「**ホスト**」 に変更します。
11.  右上の 「**保存**」 をクリックして、保存が完了するまで待ちます。
12.  右上の 「**公開する**」 をクリックして、公開が完了するまで待ちます。
13.  画面左上の 「**戻る**」 をクリックします。これで、
     「訪問」 エンティティの 「フォーム」 タブに戻ります。

## タスク \#2: 訪問ビュー を編集します

このタスクでは、既定のアクティブな 訪問ビュー を変更し、今日の訪問の新しいビューを作成します。

1.  **ビュー**タブを選択して、**アクティブな訪問**ビューをクリックして開きます。
2.  フィールドをクリックまたはドラッグアンドドロップして、次のフィールドをビューに追加します。
    1.  **コード**
    2.  **訪問者**
    3.  **建物**
    4.  **開始予定** 
    5.  **終了予定**
3.  「**作成日**」 列の横ののドロップダウン矢印をクリックし、「**削除**」 を選択します。「**作成日**」 フィールドがビューから削除されます。
4.  「**名前**」 列の横にあるドロップダウンをクリックし、「**削除**」 を選択 ます。**名前**フィールドがビューから削除されます。
5.  右側の 「プロパティ」 パネルで 「**並べ替え**」 をクリックし、「**開始予定**」 を選択します。「**開始予定**」 を再度クリックして、降順に変更します (新しい訪問を上に表示)。
6.  データに合わせて個々の列幅を変更します。
7.  「**保存**」 をクリックし、変更が保存されるまで待ちます。
8.  「**公開**」 をクリックし、公開が完了するまで待ちます。
9.  ここで、ビューをクローンして、今日の訪問のための新しいビューを作成します。「プロパティ」 パネルで既存のフィルターの横にある `x` をクリックして、フィルターを削除します。
10.  「**保存**」 ボタンの横にあるドロップダウン矢印を押して (ボタン自体を押さないように注意してください)、「**名前を付けて保存**」 を選択します。
11.  名前を 「**今日の訪問**」 に変更し、「**保存**」 を押します。
12.  「プロパティ」 パネルの 「**フィルターの編集**」 リンクを押します。
13.  「**追加**」 をクリックし、「**行の追加**」 を選択します。
14.  「**開始予定**」 をフィールドとして選択してから、「**今日**」 を条件として選択します。 
15.  「**ステータス**」 の...をクリックし、「**削除**」 をクリック します。    
16.  このビューは、スケジュールされた開始日が今日のレコードのみを表示するようにフィルター処理されます。「**OK**」 をクリックして、条件を保存します。
15.  "**実際の開始**" フィールドと "**実際の終了**" フィールドをビューに追加します。ビューのステータスをフィルター処理しないため、完了した訪問を含む今日の訪問をすべて取得します。これらのフィールドは、完了した訪問と進行中の訪問を区別するのに役立ちます。
16.  「**保存**」 をクリックし、変更が保存されるまで待ちます。
17.  「**公開**」 をクリックし、公開が完了するまで待ちます。
18.  画面左上の 「**戻る**」 をクリックします。これで、
     「訪問」 エンティティ  「ビュー」 タブ

演習 \#2: モデル駆動型アプリケーションの作成
=============================================

**目標:** この演習では、モデル駆動型アプリを作成し、サイトマップをカスタマイズして、アプリをテストします。

**注:** 特にサイトマップの手順で、アプリケーションの作成時に対処されていないフィールドがいくつか表示されます。ラボの実施のために、いくつかの項目をスキップしました。実際のプロジェクトでは、これらの項目に論理名を付けます。

タスク \#1: アプリケーションの作成
----------------------------

1.  キャンパス管理ソリューションをまだ開いていない場合は、このソリューションを開きます。

    -   <https://make.powerapps.com> にサインインします

    -   環境内でクリックして 「**キャンパス管理**」 クリックして開きます
        ソリューションを開きます。
2.  モデル駆動型アプリケーションを作成します。

    -   「**新規**」 をクリックし、「**アプリ**」、「**モデル駆動型アプリ**」 の順にクリックします。そうすると、新しいタブが開きます。
    -   「**既存のソリューションを使用してアプリを作成する**」 チェックボックスをオンにします。
    -   「名前」 に「**キャンパス管理**」と入力し、「**次へ**」 をクリックします。
    -   ドロップダウンで 「**キャンパス管理**」 ソリューションを選択し、「**完了**」 をクリックします。
3.  「**サイト マップ**」 の横にある鉛筆アイコンをクリックします。
4.  既定のタイトルを編集します。

    -   **「新しい領域」** を選択します。

    -   プロパティ ウインドウに移動し、**タイトル**に**キャンパス**とします。

    -   **「グループ」** を選択します。

    -   **プロパティ** ウインドウに移動し、**タイトル**用の**セキュリティ**と入力します。
5.  サイトマップに連絡先エンティティを追加します。

    -   「**新しいサブエリア**」 を選択します。

    -   「**プロパティ**」 ウィンドウに移動し、「**エンティティ**」 を
        「**種類**」 のドロップダウンから選択します。

    -   「**エンティティ**」 のドロップダウンから 「**連絡先**」 を検索します。
6.  サイトマップへの訪問エンティティの追加

    -   「**セキュリティ**」 グループを選択し、「**追加**」 をクリックします。

    -   「**サブエリア**」 を選択します。

    -   「**プロパティ**」 ウィンドウに移動します。

    -   「**タイプ**」 のドロップダウンから 「**エンティティ**」 を選択し、
        「**エンティティ**」 のドロップダウンから 「**訪問**」 エンティティを検索します。
7.  サイトマップへの建物エンティティの追加

    -   「**キャンパス**」 領域を選択し、「**追加**」 をクリック します。
-   **「新しいグループ」** を選択します。
    -   「**プロパティ**」 ペインで 「**タイトル**」 の 「**設定**」 に入力します。
-   「**追加**」 をクリックします。
    -   「**サブエリア**」 を選択します。
-   「**プロパティ**」 ウィンドウに移動します。
    -   **「タイプ」** のドロップダウンから **「エンティティ」** を選択し、**「エンティティ」** のドロップダウンから **「エンティティの構築」** を検索します。

8.  「**保存**」 をクリックします。変更が保存されている間、ロード画面が表示されます。

9.  **「公開」** をクリックしてサイトマップに公開し、公開が完了するまで待ちます。
10.  **「保存して閉じる」** をクリックしてサイトマップ エディターを閉じます。
11.  サイトマップに追加されたエンティティのアセットが
     アプリケーション内のすべてに表示されるようになります。
12.  **「保存」** をクリックしてアプリケーションを保存します。
13.  **「検証」** をクリックして、アプリケーションで行われた変更を検証します。これにより警告がいくつか表示されますが、エンティティの特定のビューとフォームを参照していないため、ユーザーは **「訪問」** および **「建物」** エンティティのすべてのビューとフォームにアクセスできるので無視しても構いません。
14.  **「公開」** をクリックしてアプリケーションを公開し、
     公開が完了するまで待ちます。
15.  「**保存して閉じる**」 をクリックしてアプリ エディターを閉じます。
16.  **「完了」** をクリック します。
17.  **「ソリューション」** を選択し、**「すべてのカスタマイズを公開」** を選択します。
18.  **「アプリ」** を選択すると、アプリケーションが一覧表示されるようになりました。

タスク \#2: テスト アプリケーション
--------------------------

1.  アプリケーションを起動する

    -   **「アプリ」** を選択し、**「キャンパス管理」** アプリを新しいウィンドウでクリックして開きます。(最初にアプリが表示されない場合は、ブラウザーを更新する必要があります。)

    -   アプリケーションが開始します。
2.  新しい連絡先レコードを作成する

    -   **「連絡先」** を選択します

    -   トップ メニューで **「新規」** をクリックします。

    -   **名**を **John** に、**姓**を **Doe** として入力します。

    -   「**保存して閉じる**」 をクリックします。

    -   これで、**アクティブな連絡先**ビューに作成された連絡先が表示されます。
3.  新しい建物レコードを作成する

    -   サイトマップから 「**建物**」 を選択します。

    -   **「新規」** をクリックします。

    -   Microsoft の建物として**名前**を入力します。
        
-   **「保存して閉じる」** をクリックすると、新しく作成したレコードが表示されます
        アクティブな建物ビューに表示されます。
4.  新しい表示レコードを作成します

    -   サイトマップから **「訪問」** を選択します。
    -   **「新規」** をクリックします。
    -   次のフィールドを入力します。 
        -   **名前**: 新しいテスト訪問
        -   **建物**: Microsoft の建物の選択
        -   **訪問者**: ジョン・ドウを選択
        -   **スケジュール済みの開始**: 今日の日付と 2:00 PM を開始時刻として選択します。
        -   **スケジュール済みの終了**: 今日の日付と終了時刻として午後 3:30 を選択します。
    -   「**保存して閉じる**」 をクリックします。これによりレコードが作成され、次の
        アクティブな訪問ビューが見れるようになります。
    -   ビューを **「今日の訪問」** に変更します。ビューで入力された訪問を見ることができるはずです。
5.  テスト レコードを追加できます。

# 課題

* 訪問と建物の特定のビューとフォームを選択します
* セキュリティ担当者は通常、1 つの建物で作業します。選択した建物のみの訪問を表示する簡単な方法を提供するにはどうすればよいでしょうか?
* 特定のエンティティへのアクセスを制限するにはどうすればいいでしょうか (たとえば、管理者を除くすべてのスタッフ メンバーに対して、建物を読み取り専用にする必要がありますか) ?
* アプリに追加するダッシュボードを選択してください。
