---
lab:
    title: 'ラボ 04: Power BI'
    module: 'モジュール XX:  Power Apps のビルド'
---

# PL-900: Microsoft Power Platform の基礎
## モジュール X、ラボ 4 – Power BI

シナリオ
========

ベローズ カレッジは、キャンパス内に複数の建物を持つ教育機関です。キャンパスの訪問者は現在、紙ベースの受付簿に記録されています。情報は一貫してキャプチャされず、キャンパス全体の訪問に関するデータを収集して分析する手段はありません。 

キャンパス管理は、建物へのアクセスがセキュリティ担当者によって制御され、すべての訪問がホストによって事前登録され、記録される必要がある訪問者登録システムを近代化したいと考えています。

このコースでは、アプリケーションを構築し、自動化を実行して、ベローズ カレッジの管理およびセキュリティ担当者がキャンパス内の建物へのアクセスを管理および制御できるようにします。 

このラボでは、キャンパス訪問に関するデータを視覚化する Power BI ダッシュボードをビルドします。

ラボ手順の概要
======================

次の手順に従って Power BI ダッシュボードを設計および作成します。

-   Common Data Service に接続します。 
-   関連レコードについて、ユーザーに分かりやすい説明を含むようにデータを変更する (ルックアップ)
-    キャンパス訪問情報の様々な視覚化を用いたレポートの作成と公開を行います。
-    自然言語クエリを使用して、追加的な視覚化を行います。
-    モバイル ビューを作成します。


## 前提条件

* ラボ 1 の完了 - データ モデリング

始める前に考慮すべきこと
-----------------------------------

-   このレポートが想定しているのは、どのような利用者層でしょうか?
-   利用者はどのようにレポートを活用しますか? 典型的なデバイスを使っていますか? どこからアクセスしていますか?
-   視覚化するのに十分なデータがありますか?
-   訪問に関するデータを分析するために使用できる特性は何ですか?

演習 \#1: Power BI レポートの作成 
===============================

**目的:** この演習では、Common Data Service データベースのデータに基づいて Power BI レポートを作成します。

タスク \#1: データの準備
---------------------------

1.  組織の URL を確認します。

    * https://aka.ms/ppac の Power Platform 管理センターに移動します。
    * 左側のナビゲーション ペインで、「環境」 を選択し、新しいターゲット環境を選択します。
    * 「**詳細**」 パネルの 「**環境 URL**」 を右クリックし、「**リンクのコピー**」 を選択します。
2. Power BI Desktop がインストールされていない場合は、https://aka.ms/pbidesktopstore に移動して、Power BI アプリをダウンロードおよびインストールします。

3. Power BI Desktop を開き、プロンプトが表示されたらサインインします。

4. 「**データの取得**」 を選択します。

5. 「**Power Platform**」 を選択し、「**Common Data Service**」 を選択して、「**接続**」 をクリックします。     

6. 先ほどコピーした環境 URL を貼り付け 、「**OK**」 をクリックします。 

7. 「**エンティティ**」 ノード を展開し、「**bc_Building**」 と 「**bc_Visit**」 エンティティを選択して 、「**読込み**」 をクリックします。       

8. 左の垂直ツールバーの 「**モデル**」 アイコンをクリックします。 

9. **bc_Building** テーブルから  **bc_Buildingid** 列 をドラッグして、  **bc_Visit** テーブルの **bc_building** 列にドロップします。 これにより、Power BI が関連データの表示に使用できる 2 つのエンティティ間のリレーションシップが作成されます。

10. 左側のツールバーの 「**レポート**」 アイコンを選択します。 

11. 「**フィールド**」 パネル内の **bc_Visits** ノードを展開します。   

12. ... をクリックして、「**新しい列**」 を選択します。 

13. 式を次のような完全な形にさせます

    ```
    Column = RELATED(bc_Building[bc_name])
    ```

    「ENTER」 を押します。これにより、建物名の新しいフィールドが訪問データに追加されます。

14. フィールド横の ... をクリックして、 「**名前の変更**」 を選択します。  フィールド名として **Building** を入力します。

15. 「**bc_visitid**」 フィールドの横の ... をクリックし、「**名前の変更**」 を選択します。    フィールド名として **Visits** を入力します。

16. 「**bc_scheduledstart**」 フィールドの横にある ... をクリックして、  「**名前の変更**」 を選択します。フィールド名として **起動**を入力します。

17. 作業中のファイルを 「**ファイル &#124; 保存**」 をクリックして、自由にファイル名を入力します。

## タスク #2: グラフと時間の視覚化を作成する

1. 「**視覚化**」 パネルの円グラフ アイコン を押して、グラフを挿入します。 
2. 「**Building**」 フィールドをドラッグして、「**凡例ターゲット**」 ボックスにドロップします。   
3. 「**訪問数**」 フィールドをドラッグして、「**値**」 ターゲット ボックスにドロップします。   
4. コーナー ハンドルで円グラフのサイズを変更し、すべてのグラフ コンポーネントが表示されるようにします。
5. Power BI リボンの 「**新しいビジュアル**」 をクリックし、「**視覚化**」 ウィンドウで積み上げ縦棒グラフを選択します。    
6. 「**訪問数**」 フィールドをドラッグして、「**値**」 ターゲット ボックスにドロップします。   
7. 「**開始**」 フィールドをドラッグして、「**軸**のターゲット」 ボックスにドロップします。
8. **日**と**四半期**の横にある  **「x」** をクリックすると、**年**と**月**の合計のみが表示されます。         
9. コーナー ハンドルを使用して、必要に応じてグラフのサイズを変更します。
10. レポートがインタラクティブに動作するかをテストします。
    * 円グラフでさまざまな積み重なったスライスを選択し、時間レポートの変化を見てみましょう。
    * 時間縦棒グラフでさまざまなバーを選択し、円グラフの変更を見てみましょう。
    * アイコンまたは 「**データ/ドリル &#124; 次のレベルを展開する**」 リボン コマンドを使用して、月レベルにドリルダウンします。
11. 「**ファイル &#124; 保存**」 を押して、作業中のファイルを保存します。

演習 2: Power BI  ダッシュボードを作成する。
================================

## タスク 1Power BI レポートを発行する。

1. リボンの 「**発行**」 ボタンを押します。 

2. コピー先として 「**マイ ワークスペース**」 を選択し、「**選択**」 を押します。   

3. 公開が完了するまで待ち、「**Power BI で \<name of your report\>.pbix を開く**」 をクリックします。 

## タスク #2: Power BI  ダッシュボードを作成する。

1. 「**マイ ワークスペース**」 を展開します。
2. 「**レポート**」 の見出しでレポートを選択します。
3. メニューの 「**ライブ ページをピン留めする**」 を選択します。  レイアウトによっては、追加のメニュー項目を表示するためには ... を押す必要があります。
4. 「**ダッシュボードにピン留めする**」 プロンプトで、「**新しいダッシュボード**」 を選択します。
5. **ダッシュボード名**として「**キャンパス管理**」と入力し、「**ライブをピン留めする**」 を押します。     
6. 「**マイ ワークスペース**」 ノードを選択し、「**キャンパス管理**」 ダッシュボードを選択します。   
7. 表示される円グラフと棒グラフがインタラクティブに動作するかをテストします。

## タスク 3: 自然言語を使用した視覚化を追加します。

1. 「**ダッシュボードの上でデータに関する質問をする**」 を選択します。
2. Q&A エリアで、**訪問数別に見る建物**と入力します。棒グラフが表示されます。
3. 「**ビジュアルをピン留めする**」 を選択します。
4. 「**既存のダッシュボード**」 を選択し、「**キャンパス管理**」 ダッシュボードを選択します。次に、「**ピン留めする**」 を押 します。     
5. グラフをクリックして Q&A にドリルダウンして動作をテストします。

## タスク #4: 携帯電話ビューの構築

1. レポート領域から 「**レポート**」 を選択します。 
2. UI のバージョンに応じて、次のうち、いずれかを選択します。|モバイル ビューまたは  **Web ビュー | 通話ビュー**
3. 必要に応じてタイルを並べ替えます。
4. ... を選択します。| QRコードを生成する。
5. モバイル デバイスをお持ちの場合は、iOS と Android の両方のプラットフォームで入手可能な QR スキャナ アプリを使用してコードをスキャンします。
6. モバイル デバイス上のレポートを移動して調査します。

# 課題

* キャンパスと建設計画を含むダッシュボードとレポート
* 訪問パターンと傾向を報告および分析
* 滞在時間が長過ぎる訪問者をどう視覚化するか
* 大規模キャンパスでリアルタイムに近い処理を実現するストリーミング Power BI 
